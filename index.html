<!DOCTYPE html>
<html>
<head>
  <title>ADMIN_PANEL - HackerDragon</title>
  <style>
    body {
      background:#121212;
      color:#e0e0e0;
      font-family:Segoe UI,sans-serif;
      margin:0;
    }
    .gold-glow {
      color:#ffd700;
      text-shadow:0 0 15px #ffae00;
      text-transform:uppercase;
    }
    .toolbar {
      background:#000;
      padding:10px 20px;
      display:flex;
      justify-content:space-between;
      border-bottom:1px solid #333;
    }
    .panel-layout {
      display:flex;
      gap:20px;
      padding:20px;
      justify-content:center;
    }
    .control-box {
      background:#1e1e1e;
      border:1px solid #333;
      padding:20px;
      border-radius:8px;
      width:350px;
    }
    input {
      background:#000;
      border:1px solid #333;
      color:#fff;
      padding:10px;
      width:100%;
      margin-bottom:10px;
    }
    button {
      padding:10px;
      border:none;
      cursor:pointer;
      margin:5px 0;
      width:100%;
    }
    .win-btn { background:#0078d7; color:white; }
    .red-btn { background:#aa0000; color:white; }
    .clear-btn { background:#444; color:white; }
    #screen-preview {
      position:fixed;
      bottom:20px;
      left:20px;
      width:240px;
      height:160px;
      background:#000;
      border:2px solid gold;
    }
    .preview-header {
      background:gold;
      color:black;
      font-size:10px;
      padding:3px;
      font-weight:bold;
    }
    #status {
      color:#00ff41;
      text-align:center;
      padding-top:40px;
      font-size:12px;
    }
  </style>
</head>

<body>

<!-- LOGIN PROTECTION -->
<script>
if (localStorage.getItem("systemAccess") !== "granted") {
  window.location.href = "/index.html";
}
</script>

<div class="toolbar">
  <div><span style="color:#00ff41">●</span> SYSTEM_ACTIVE</div>
</div>

<h1 class="gold-glow" style="text-align:center;">Hello, Admin.</h1>

<div class="panel-layout">

  <div class="control-box">
    <h3>WINDOWS ALERT</h3>
    <input id="alertText"
           placeholder="Type message and press Enter"
           onkeydown="handleEnter(event)">
    <button class="win-btn" onclick="sendPrank('windows')">Windows Update</button>
    <button class="red-btn" onclick="sendPrank('red')">Security Alert</button>
    <button class="clear-btn" onclick="sendPrank('clear')">Clear</button>
  </div>

</div>

<div id="screen-preview">
  <div class="preview-header">VIEWER_PREVIEW</div>
  <div id="status">OFFLINE</div>
</div>

<script>
function handleEnter(e) {
  if (e.key === "Enter") sendPrank("custom");
}

function sendPrank(type) {
  const input = document.getElementById("alertText");
  const msg = input.value.trim();

  if (type === "custom" && !msg) return;

  localStorage.setItem("latestPrank", JSON.stringify({
    type,
    msg,
    time: Date.now()
  }));

  input.value = "";
}

setInterval(() => {
  const state = JSON.parse(localStorage.getItem("viewerState"));
  if (!state) return;

  const preview = document.getElementById("screen-preview");
  document.getElementById("status").innerText = "● LIVE_CONNECTION";

  if (state.state === "red") preview.style.background = "#aa0000";
  else if (state.state === "windows") preview.style.background = "#0078d7";
  else preview.style.background = "#000";
}, 500);
</script>

</body>
</html>
