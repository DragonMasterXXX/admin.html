<!DOCTYPE html>
<html>
<head>
    <title>ADMIN_PANEL - HackerDragon</title>
    <!-- Use ./ for GitHub Pages relative pathing -->
    <link rel="stylesheet" href="./css/style.css">
    <!-- Load Socket.io from CDN because GitHub cannot serve /socket.io/socket.io.js -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body class="admin-body">
    <div class="toolbar">
        <div class="toolbar-left">
            <span class="gold-text status-dot">‚óè</span> SYSTEM_ACTIVE
        </div>
        <div class="toolbar-right">
            <button onclick="copyLink()" class="prank-link-btn">PRANK LINK</button>
        </div>
    </div>

    <div class="admin-container">
        <h1 class="gold-glow" style="text-align: center; margin-top: 50px;">Hello, Admin.</h1>

        <div class="panel-layout" style="display: flex; gap: 20px; padding: 20px; justify-content: center;">
            <!-- Alert Controls -->
            <div class="control-box" style="flex: 1; max-width: 400px;">
                <h3>FAKE_SYSTEM_ALERTS</h3>
                <div class="input-row" style="margin-bottom: 15px;">
                    <input type="text" id="alertText" placeholder="Enter custom message..." style="width: 70%;">
                    <button onclick="sendPrank('custom')">SEND</button>
                </div>
                <div class="quick-btns">
                    <button class="win-btn" onclick="sendPrank('windows')">Windows Update</button>
                    <button class="red-btn" onclick="sendPrank('red')">Malware Alert</button>
                    <button class="clear-btn" onclick="sendPrank('clear')">CLEAR ALL</button>
                </div>
            </div>

            <!-- Remote Mouse & File Control (Cleaned up as requested) -->
            <div class="control-box" style="flex: 1; max-width: 400px;">
                <h3>REMOTE_CONTROL</h3>
                <label class="switch">
                    <input type="checkbox" id="mouseToggle" onchange="toggleMouse()">
                    <span class="slider"></span>
                </label>
                <span style="margin-left:10px">Control Mouse</span>

                <div style="margin-top: 30px; border-top: 1px solid #444; padding-top: 20px;">
                    <p style="font-size: 12px; color: #888;">VICTIM ACTIONS:</p>
                    <!-- Trigger for the viewer animation -->
                    <button class="red-btn" style="width: 100%; padding: 10px;" onclick="sendPrank('delete-files')">TRIGGER FILE DELETION</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Viewer Screen Preview (Fixed Logic) -->
    <div id="screen-preview">
        <div class="preview-header">VIEWER_STREAM</div>
        <div id="preview-content" style="text-align: center; padding-top: 40px; color: #00ff41; font-family: 'Share Tech Mono', monospace;">
            <p id="preview-status">WAITING_FOR_CONNECTION...</p>
        </div>
    </div>

    <script>
        /**
         * IMPORTANT: Replace the URL below with your actual backend URL 
         * (e.g. from Render, Railway, or Heroku). 
         * GitHub Pages cannot run Node.js servers.
         */
        const socket = io('https://your-prank-backend.onrender.com'); 

        socket.emit('join', 'admin');

        function sendPrank(type) {
            const msg = document.getElementById('alertText').value;
            socket.emit('prank-command', { type, msg });
        }

        function toggleMouse() {
            const active = document.getElementById('mouseToggle').checked;
            socket.emit('prank-command', { type: 'set-mouse-state', active });
            
            if (active) {
                window.addEventListener('mousemove', emitMouse);
                document.getElementById('preview-status').innerText = "CONTROLL
