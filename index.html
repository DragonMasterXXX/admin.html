<!DOCTYPE html>
<html>
<head>
  <title>ADMIN_PANEL - HackerDragon</title>
  <style>
    body {
      background:#121212;
      color:#e0e0e0;
      font-family:Segoe UI,sans-serif;
      margin:0;
    }
    .gold-glow {
      color:#ffd700;
      text-shadow:0 0 15px #ffae00;
      text-transform:uppercase;
    }
    .toolbar {
      background:#000;
      padding:10px 20px;
      display:flex;
      justify-content:space-between;
      border-bottom:1px solid #333;
    }
    .panel-layout {
      display:flex;
      gap:20px;
      padding:20px;
      justify-content:center;
    }
    .control-box {
      background:#1e1e1e;
      border:1px solid #333;
      padding:20px;
      border-radius:8px;
      width:350px;
    }
    input {
      background:#000;
      border:1px solid #333;
      color:#fff;
      padding:10px;
      width:100%;
      margin-bottom:10px;
    }
    button {
      padding:10px;
      border:none;
      cursor:pointer;
      margin:5px 0;
      width:100%;
    }
    .win-btn { background:#0078d7; color:white; }
    .red-btn { background:#aa0000; color:white; }
    .clear-btn { background:#444; color:white; }
    .delete-btn { background:#880000; color:white; }
    #screen-preview {
      position:fixed;
      bottom:20px;
      left:20px;
      width:240px;
      height:160px;
      background:#000;
      border:2px solid gold;
    }
    .preview-header {
      background:gold;
      color:black;
      font-size:10px;
      padding:3px;
      font-weight:bold;
    }
    #status {
      color:#00ff41;
      text-align:center;
      padding-top:40px;
      font-size:12px;
    }
    /* Draggable file icons */
    .file-icon {
      width:40px;
      position:absolute;
      cursor:pointer;
      user-select:none;
    }
  </style>
</head>
<body>

<script>
if (localStorage.getItem("systemAccess") !== "granted") {
  window.location.href = "/index.html";
}
</script>

<div class="toolbar">
  <div><span style="color:#00ff41">●</span> SYSTEM_ACTIVE</div>
</div>

<h1 class="gold-glow" style="text-align:center;">Hello, Admin.</h1>

<div class="panel-layout">

  <div class="control-box">
    <h3>WINDOWS ALERT</h3>
    <input id="alertText" placeholder="Type message and press Enter" onkeydown="handleEnter(event)">
    <button class="win-btn" onclick="sendPrank('windows')">Windows Update</button>
    <button class="red-btn" onclick="sendPrank('red')">Security Alert</button>
    <button class="clear-btn" onclick="sendPrank('clear')">Clear</button>
    <button class="delete-btn" onclick="sendPrank('delete-files')">Delete Victim Files</button>
  </div>

</div>

<!-- Fake preview -->
<div id="screen-preview">
  <div class="preview-header">VIEWER_PREVIEW</div>
  <div id="status">OFFLINE</div>
</div>

<!-- Draggable icons on admin -->
<img src="images/file.png" id="admin-file" class="file-icon" style="top:20px; left:20px;">
<img src="images/bin.png" id="admin-bin" class="file-icon" style="bottom:20px; right:20px;">

<script>
/* ---- Admin controls ---- */
function handleEnter(e) {
  if(e.key==="Enter") sendPrank("custom");
}

function sendPrank(type) {
  const input = document.getElementById("alertText");
  const msg = input.value.trim();

  if(type==="custom" && !msg) return;

  localStorage.setItem("latestPrank", JSON.stringify({
    type,
    msg,
    time: Date.now()
  }));

  input.value = "";
}

/* ---- Fake viewer preview ---- */
setInterval(()=>{
  const state = JSON.parse(localStorage.getItem("viewerState"));
  if(!state) return;

  const preview = document.getElementById("screen-preview");
  document.getElementById("status").innerText = "● LIVE_CONNECTION";

  if(state.state==="red") preview.style.background="#aa0000";
  else if(state.state==="windows") preview.style.background="#0078d7";
  else preview.style.background="#000";

  // sync admin file positions to viewer
  const icons = {file: document.getElementById("admin-file"), bin: document.getElementById("admin-bin")};
  localStorage.setItem("filePositions", JSON.stringify({
    file:{top: icons.file.style.top, left: icons.file.style.left},
    bin:{top: icons.bin.style.top, left: icons.bin.style.left}
  }));
},500);

/* ---- Draggable file icons ---- */
function makeDraggable(el) {
  let offsetX, offsetY, dragging=false;

  el.onmousedown = function(e){
    dragging=true;
    offsetX=e.clientX - el.offsetLeft;
    offsetY=e.clientY - el.offsetTop;
  };
  document.onmouseup = function(){dragging=false;};
  document.onmousemove = function(e){
    if(dragging){
      el.style.left = (e.clientX - offsetX) + "px";
      el.style.top = (e.clientY - offsetY) + "px";
    }
  };
}
makeDraggable(document.getElementById("admin-file"));
makeDraggable(document.getElementById("admin-bin"));

</script>

</body>
</html>
